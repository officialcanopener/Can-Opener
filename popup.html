<!DOCTYPE html>
<html style="min-width: 400px; min-height: 600px;">
<head>
  <title>Can Opener</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="popup.css">
  <!-- Removed the external script causing CSP errors -->
</head>
<body>
  <div class="container">
    <div id="status-banner" class="status-banner ready">
      <span id="status-message">Ready</span>
    </div>
    
    <header>
      <h1 id="title-text">Can Opener</h1>
      <button id="tip-button" class="tip-button">Support</button>
    </header>
    
    <div class="settings-section">
      <div class="setting-row">
        <div class="toggle-container">
          <div class="button-wrapper" style="cursor: pointer !important; position: relative;">
            <div id="effect-indicator" class="status-indicator active clickable">WAVE</div>
          </div>
          <div id="color-picker-container" class="color-picker-container" style="display: none; margin-left: 10px;">
            <input type="color" id="static-color" value="#8C00FF">
          </div>
          <div id="speed-selector-container" class="speed-selector" style="margin-left: 10px;">
            <div class="button-wrapper" style="cursor: pointer !important; position: relative;">
              <div class="speed-option" data-speed="slow">1</div>
            </div>
            <div class="button-wrapper" style="cursor: pointer !important; position: relative;">
              <div class="speed-option active" data-speed="medium">2</div>
            </div>
            <div class="button-wrapper" style="cursor: pointer !important; position: relative;">
              <div class="speed-option" data-speed="fast">3</div>
            </div>
          </div>
        </div>
        <div class="toggle-container" style="margin-left: 15px;">
          <div class="button-wrapper" style="cursor: pointer !important; position: relative;">
            <div id="status-indicator" class="status-indicator active clickable">ON</div>
          </div>
        </div>
      </div>
      
      <div class="setting-row site-selection-row">
        <div class="site-buttons-container">
          <div class="site-button-group">
            <div class="site-name-label" id="axiom-label">Axiom</div>
            <div class="button-wrapper" style="cursor: pointer !important;">
              <div class="site-button active" data-value="axiom" data-logo="axiom-logo.png" data-name="Axiom">
                <img src="axiom-logo.png" class="site-button-logo">
              </div>
            </div>
          </div>
          
          <div class="site-button-group">
            <div class="site-name-label" id="bullx-label" style="display: none;">BullX</div>
            <div class="button-wrapper" style="cursor: pointer !important;">
              <div class="site-button" data-value="bullx" data-logo="bullx-logo.png" data-name="BullX">
                <img src="bullx-logo.png" class="site-button-logo">
              </div>
            </div>
          </div>
          
          <div class="site-button-group">
            <div class="site-name-label" id="photon-label" style="display: none;">Photon</div>
            <div class="button-wrapper" style="cursor: pointer !important;">
              <div class="site-button" data-value="photon" data-logo="photon-logo.png" data-name="Photon">
                <img src="photon-logo.png" class="site-button-logo">
              </div>
            </div>
          </div>
          
          <div class="site-button-group">
            <div class="site-name-label" id="gmgn-label" style="display: none;">GMGN</div>
            <div class="button-wrapper" style="cursor: pointer !important;">
              <div class="site-button" data-value="gmgn" data-logo="gmgn-logo.png" data-name="GMGN">
                <img src="gmgn-logo.png" class="site-button-logo">
              </div>
            </div>
          </div>
          
          <div class="site-button-group">
            <div class="site-name-label" id="dexscreener-label" style="display: none;">DEX</div>
            <div class="button-wrapper" style="cursor: pointer !important;">
              <div class="site-button" data-value="dexscreener" data-logo="dexscreener-logo.png" data-name="DEX">
                <img src="dexscreener-logo.png" class="site-button-logo">
              </div>
            </div>
          </div>
          
          <div class="site-button-group">
            <div class="site-name-label" id="birdeye-label" style="display: none;">Birdeye</div>
            <div class="button-wrapper" style="cursor: pointer !important;">
              <div class="site-button" data-value="birdeye" data-logo="birdeye-logo.png" data-name="Birdeye">
                <img src="birdeye-logo.png" class="site-button-logo">
              </div>
            </div>
          </div>
          
          <!-- Hidden select for storing the value -->
          <select id="trading-site" style="display:none;">
            <option value="axiom">Axiom</option>
            <option value="bullx">BullX</option>
            <option value="photon">Photon</option>
            <option value="gmgn">GMGN</option>
            <option value="dexscreener">DEX</option>
            <option value="birdeye">Birdeye</option>
          </select>
        </div>
      </div>
    </div>
    
    <div class="recent-section">
      <h2>History</h2>
      <div id="recent-addresses-list">
        <div class="loading">Loading recent addresses...</div>
      </div>
    </div>
    
    <!-- Tip Modal -->
    <div id="tip-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Support the Developer</h2>
          <span class="close-modal">&times;</span>
        </div>
        <div class="modal-body">
          <p class="tip-intro">
            If you find Can Opener useful, consider sending a small tip to support continued development and maintenance!
          </p>
          
          <div class="tip-options">
            <div class="tip-option">
              <h3><img src="phantom-icon.png" class="wallet-icon" alt="Phantom"> Using Phantom Wallet</h3>
              <p class="security-note">Send SOL securely through our dedicated payment page</p>
              
              <div class="amount-selector">
                <p>Select Amount:</p>
                <div class="amount-buttons">
                  <button class="amount-btn" data-amount="0.1">0.1 SOL</button>
                  <button class="amount-btn" data-amount="0.5">0.5 SOL</button>
                  <button class="amount-btn" data-amount="1">1 SOL</button>
                  <button class="amount-btn custom">Custom</button>
                </div>
                <div class="custom-amount-container" style="display: none;">
                  <input type="number" id="custom-amount" min="0.01" step="0.01" placeholder="Enter SOL amount">
                </div>
              </div>
              
              <div class="phantom-actions">
                <button id="open-phantom-button" class="primary-button">Connect to Phantom</button>
                <div id="phantom-status" class="wallet-status">Opens a secure payment page in your browser</div>
              </div>
              
              <div class="phantom-instructions">
                <h4>How it works:</h4>
                <ol>
                  <li>Click "Connect to Phantom" above</li>
                  <li>A secure payment page will open in a new tab</li>
                  <li>The page will directly connect to your Phantom wallet</li>
                  <li>Review and confirm the transaction in Phantom</li>
                  <li>Return to Can Opener when complete</li>
                </ol>
              </div>
            </div>
            
            <div class="divider">
              <span>OR</span>
            </div>
            
            <div class="tip-option">
              <h3>Manual Copy</h3>
              <p class="security-note">Copy the address and send SOL manually from your wallet app</p>
              
              <div class="address-container">
                <p class="wallet-address">84U4Z1E7iYdXjkhBUWgDTAuDEf6LLCGSfg35VmxAE5Eo</p>
                <button id="copy-address" class="secondary-button">Copy Address</button>
                <span id="copy-confirmation" class="copy-confirmation">Copied!</span>
              </div>
              
              <div class="qr-code">
                <img src="qr-code.png" alt="Wallet QR Code">
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <p class="thank-you">Thank you for your support! ❤️</p>
        </div>
      </div>
    </div>
    
    <!-- Transaction Status Modal -->
    <div id="transaction-modal" class="modal transaction-modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Transaction Status</h2>
        </div>
        <div class="modal-body">
          <div id="transaction-status"></div>
          <div id="transaction-details"></div>
        </div>
        <div class="modal-footer">
          <button id="close-transaction" class="secondary-button">Close</button>
        </div>
      </div>
    </div>
  </div>
  <script src="popup.js"></script>
</body>
</html> 